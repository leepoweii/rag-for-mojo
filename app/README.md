# å¤¢é…’é¤¨ RAG å“ç‰Œå¤§ä½¿ - Web æ‡‰ç”¨ç¨‹å¼

é€™æ˜¯å¤¢é…’é¤¨ (MOJO) çš„ RAG å“ç‰Œå¤§ä½¿ Web æ‡‰ç”¨ç¨‹å¼ï¼Œä½¿ç”¨ Flask + ç²¾ç¾å‰ç«¯è¨­è¨ˆï¼Œå¯ä»¥éƒ¨ç½²åˆ° Zeabur æˆ–å…¶ä»–é›²ç«¯å¹³å°ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ¸ **æ™ºèƒ½å°è©±**: ä½¿ç”¨ RAG æŠ€è¡“æä¾›æº–ç¢ºçš„å“ç‰Œä»‹ç´¹å’Œèª¿é…’æ¨è–¦
- ğŸ¨ **ç²¾ç¾è¨­è¨ˆ**: èåˆé‡‘é–€æ–‡åŒ–èˆ‡é…’å§æ°›åœçš„ç¨ç‰¹è¦–è¦ºè¨­è¨ˆ
- ğŸ’¬ **å³æ™‚äº’å‹•**: æµæš¢çš„èŠå¤©ä»‹é¢ï¼Œæ”¯æ´æ‰“å­—æ©Ÿæ•ˆæœ
- ğŸ” **èªæ„æ‹†è§£**: è‡ªå‹•æ‹†è§£è¤‡åˆå•å¥ï¼Œæå‡æª¢ç´¢æº–ç¢ºåº¦
- ğŸ“± **éŸ¿æ‡‰å¼è¨­è¨ˆ**: æ”¯æ´æ¡Œé¢å’Œè¡Œå‹•è£ç½®

## æŠ€è¡“æ¶æ§‹

### å¾Œç«¯
- **æ¡†æ¶**: Flask 3.0+
- **LLM**: OpenAI GPT-4o-mini
- **å‘é‡æª¢ç´¢**: FAISS + E5 Embedding
- **RAG**: LangChain

### å‰ç«¯
- **è¨­è¨ˆé¢¨æ ¼**: æ¶²æ…‹é‡‘é–€ - æ·±è‰²èª¿æ­é…ç¥ç€é‡‘è‰²
- **å­—å‹**: Noto Serif TC (ä¸­æ–‡) + Cinzel (è‹±æ–‡æ¨™é¡Œ) + Cormorant Garamond (è‹±æ–‡å…§æ–‡)
- **å‹•ç•«**: CSS åŸç”Ÿå‹•ç•« + æ‰“å­—æ©Ÿæ•ˆæœ
- **ç‰¹æ•ˆ**: æ¼¸è®ŠèƒŒæ™¯ã€é¡†ç²’ç´‹ç†ã€ç»ç’ƒè³ªæ„Ÿ

## å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒéœ€æ±‚

- Python >= 3.10
- uv (Python å¥—ä»¶ç®¡ç†å·¥å…·)

### 2. å®‰è£ uv

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### 3. å®‰è£ä¾è³´

```bash
cd app
uv sync
```

### 4. è¨­å®šç’°å¢ƒè®Šæ•¸

```bash
# è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”æ¡ˆ
cp .env.example .env

# ç·¨è¼¯ .env æª”æ¡ˆï¼Œå¡«å…¥ä½ çš„ OpenAI API Key
# OPENAI_API_KEY=your_openai_api_key_here
```

### 5. æœ¬åœ°é‹è¡Œ

```bash
# æ–¹æ³• 1: ä½¿ç”¨ port 8000ï¼ˆæ¨è–¦ - macOS ç”¨æˆ¶ï¼‰
PORT=8000 uv run python app.py

# æ–¹æ³• 2: ä½¿ç”¨é è¨­ port 5000
uv run python app.py

# æ–¹æ³• 3: å•Ÿå‹•è™›æ“¬ç’°å¢ƒå¾Œé‹è¡Œ
source .venv/bin/activate  # Linux/macOS
# .venv\Scripts\activate  # Windows
PORT=8000 python app.py
```

**è¨ªå•æ‡‰ç”¨ç¨‹å¼:**
- Port 8000: `http://localhost:8000`
- Port 5000: `http://localhost:5000`

âš ï¸ **macOS ç”¨æˆ¶æ³¨æ„**: ç³»çµ±çš„ AirPlay Receiver é è¨­ä½”ç”¨ port 5000ï¼Œå»ºè­°ä½¿ç”¨ port 8000ï¼Œæˆ–å‰å¾€ã€Œç³»çµ±è¨­å®šã€â†’ã€Œä¸€èˆ¬ã€â†’ã€Œéš”ç©ºæ’­æ”¾æ¥æ”¶å™¨ã€é—œé–‰è©²åŠŸèƒ½ã€‚

## éƒ¨ç½²åˆ° Zeabur

### æ–¹æ³•ä¸€ï¼šé€é GitHub éƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰

1. **å°‡ /app è³‡æ–™å¤¾æ¨é€åˆ° GitHub**
   ```bash
   cd app
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin <your-repo-url>
   git push -u origin main
   ```

2. **åœ¨ Zeabur å»ºç«‹å°ˆæ¡ˆ**
   - ç™»å…¥ [Zeabur](https://zeabur.com)
   - é»æ“Šã€ŒCreate Projectã€
   - é¸æ“‡ä½ çš„ GitHub repository

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   åœ¨ Zeabur å°ˆæ¡ˆè¨­å®šä¸­æ·»åŠ ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ï¼š
   - `OPENAI_API_KEY`: ä½ çš„ OpenAI API Key
   - `OPENAI_MODEL`: `gpt-4o-mini`
   - `EMBEDDING_MODEL`: `intfloat/multilingual-e5-small`
   - `SECRET_KEY`: éš¨æ©Ÿç”Ÿæˆçš„å¯†é‘°

4. **éƒ¨ç½²**
   - Zeabur æœƒè‡ªå‹•åµæ¸¬ Python å°ˆæ¡ˆä¸¦éƒ¨ç½²
   - ç­‰å¾…å»ºç½®å®Œæˆå¾Œå³å¯è¨ªå•

### æ–¹æ³•äºŒï¼šä½¿ç”¨ Zeabur CLI

```bash
# å®‰è£ Zeabur CLI
npm install -g @zeabur/cli

# ç™»å…¥
zeabur login

# éƒ¨ç½²
zeabur deploy
```

## å°ˆæ¡ˆçµæ§‹

```
app/
â”œâ”€â”€ app.py                  # Flask ä¸»ç¨‹å¼
â”œâ”€â”€ pyproject.toml          # uv å°ˆæ¡ˆé…ç½®
â”œâ”€â”€ .env.example            # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥æª”æ¡ˆ
â”œâ”€â”€ README.md               # æœ¬èªªæ˜æ–‡ä»¶
â”œâ”€â”€ faiss_db/               # FAISS å‘é‡è³‡æ–™åº«
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html          # ä¸»é é¢æ¨¡æ¿
â””â”€â”€ static/
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css       # æ¨£å¼è¡¨
    â””â”€â”€ js/
        â””â”€â”€ app.js          # å‰ç«¯äº’å‹•è…³æœ¬
```

## ç’°å¢ƒè®Šæ•¸èªªæ˜

| è®Šæ•¸åç¨± | èªªæ˜ | é è¨­å€¼ |
|---------|------|-------|
| `OPENAI_API_KEY` | OpenAI API é‡‘é‘° | å¿…å¡« |
| `OPENAI_MODEL` | ä½¿ç”¨çš„ OpenAI æ¨¡å‹ | `gpt-4o-mini` |
| `EMBEDDING_MODEL` | Embedding æ¨¡å‹ | `intfloat/multilingual-e5-small` |
| `SECRET_KEY` | Flask å¯†é‘° | è‡ªå‹•ç”Ÿæˆ |
| `PORT` | æœå‹™åŸ è™Ÿ | `5000` (Zeabur è‡ªå‹•è¨­å®š) |

## ä½¿ç”¨èªªæ˜

1. é–‹å•Ÿæ‡‰ç”¨ç¨‹å¼å¾Œï¼Œæ‚¨æœƒçœ‹åˆ°æ­¡è¿è¨Šæ¯
2. åœ¨è¼¸å…¥æ¡†è¼¸å…¥æ‚¨çš„å•é¡Œï¼Œä¾‹å¦‚ï¼š
   - "è«‹æ¨è–¦ä¸€æ¯é©åˆå¤å¤©çš„æ¸…çˆ½èª¿é…’"
   - "å¤¢é…’é¤¨çš„å“ç‰Œç†å¿µæ˜¯ä»€éº¼ï¼Ÿ"
   - "æœ‰å“ªäº›åœ‹éš›åª’é«”å ±å°éå¤¢é…’é¤¨ï¼Ÿ"
3. æŒ‰ Enter æˆ–é»æ“Šç™¼é€æŒ‰éˆ•
4. å“ç‰Œå¤§ä½¿æœƒä»¥å°ˆæ¥­ä¸”æº«æš–çš„èªæ°£å›ç­”æ‚¨

## é–‹ç™¼èªªæ˜

### ä¿®æ”¹æ¨£å¼

ç·¨è¼¯ `static/css/style.css` æª”æ¡ˆï¼Œæ‰€æœ‰é¡è‰²è®Šæ•¸éƒ½å®šç¾©åœ¨ `:root` å€å¡Šä¸­ã€‚

### ä¿®æ”¹ RAG é‚è¼¯

ä¸»è¦é‚è¼¯åœ¨ `app.py` ä¸­ï¼š
- `separate_queries()`: èªæ„æ‹†è§£
- `retrieve_answers()`: å‘é‡æª¢ç´¢
- `integrate_answers()`: æ•´åˆå›ç­”

### æ›´æ–°å‘é‡è³‡æ–™åº«

å¦‚éœ€æ›´æ–°çŸ¥è­˜åº«å…§å®¹ï¼š
1. ä¿®æ”¹åŸå§‹è³‡æ–™
2. é‡æ–°ç”Ÿæˆ FAISS å‘é‡è³‡æ–™åº«
3. æ›¿æ› `faiss_db/` è³‡æ–™å¤¾

## å•é¡Œæ’è§£

### æ¨¡å‹è¼‰å…¥éŒ¯èª¤
- ç¢ºèª `faiss_db/` è³‡æ–™å¤¾å·²æ­£ç¢ºè¤‡è£½
- æª¢æŸ¥ Embedding æ¨¡å‹æ˜¯å¦æ­£ç¢ºå®‰è£

### API éŒ¯èª¤
- ç¢ºèª OpenAI API Key æ˜¯å¦æ­£ç¢º
- æª¢æŸ¥ API é¡åº¦æ˜¯å¦è¶³å¤ 

### éƒ¨ç½²å¤±æ•—
- ç¢ºèª `pyproject.toml` æ ¼å¼æ­£ç¢º
- æª¢æŸ¥æ‰€æœ‰ä¾è³´æ˜¯å¦å·²åˆ—å‡º

## æˆæ¬Š

æœ¬å°ˆæ¡ˆç‚ºå¤¢é…’é¤¨å°ˆå±¬æ‡‰ç”¨ç¨‹å¼ã€‚

## è¯çµ¡æ–¹å¼

- Email: contact@mojokm.com
- åŸå§‹å°ˆæ¡ˆ: [rag-for-mojo](https://github.com/leepoweii/rag-homework)
